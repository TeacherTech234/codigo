<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Teacher Tech - Banco de Quest√µes</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="Imagens/LogoPrincipal.jpg" type="image">
</head>

<body>
  <header>
    <h2>Teacher Tech - Inform√°tica</h2>
    <nav>

      <a href="home.html">Inicio</a>
      <a href="banco.html">Banco de Quest√µes</a>
      <a href="avaliacao.html">Criar Avalia√ß√£o</a>
      <a href="sobre.html">Sobre</a>
      <a href="index.html">Entrar</a>

    </nav>
  </header>

  <section class="DM">
    <h1>Banco de Quest√µes</h1>
    <p>Pesquise quest√µes por tema, nesse banco de quest√µes.</p>
  </section>

  <section class="CR">
    <div class="CR">
      <h3>HTML E CSS</h3>
      <p>

      <h4>Quest√µes: </h4>
      <ul>
        <li><a href="arquivos_padrao/Quest√µes HTML e CSS - Parte 1.pdf" open target="_blank"> HTML E CSS - PARTE 1</a>
        </li>
        <br>
        <li><a href="arquivos_padrao/Quest√µes HTML e CSS - Parte 2.pdf" open target="_blank"> HTML E CSS - PARTE 2</a>
        </li>
        </ul>

      <h4>Quest√µes respondidas:</h4>
      <ul>
        <li><a href="arquivos_padrao/Quest√µes respondidas HTML e CSS - Parte 1.pdf" open target="_blank"> HTML E CSS
            RESPONDIDOS - PARTE 1</a></li>
        <br>
        <li><a href="arquivos_padrao/Quest√µes respondidas HTML e CSS - Parte 2.pdf" open target="_blank"> HTML E CSS
            RESPONDIDOS - PARTE 2</a></li>
      </ul>
      </p>
    </div>

    <div class="CR">
      <h3>Javascript</h3>
      <p>
        <h4>Quest√µes:</h4>
        <ul>
          <li><a href="arquivos_padrao/Quest√µes JS - Parte 1.pdf" open target="_blank"> JAVASCRIPT - PARTE 1</a></li>
          <br>
          <li><a href="arquivos_padrao/Quest√µes JS - Parte 2.pdf" open target="_blank"> JAVASCRIPT - PARTE 2</a></li>
        </ul>

        <h4>Quest√µes respondidas:</h4>
        <ul>
          <li><a href="arquivos_padrao/Quest√µes respondidas JS - Parte 1.pdf" open target="_blank"> JAVASCRIPT RESPONDIDOS -
            PARTE 1</a>
          </li>
          <br>
          <li><a href="arquivos_padrao/Quest√µes respondidas JS - Parte 2.pdf" open target="_blank"> JAVASCRIPT RESPONDIDOS -
            PARTE 2</a></li>
        </ul>
      </p>
    </div>
  </section>

  <section class="CR">
    <div class="CR">
      <h3>Ciberseguran√ßa:</h3>
      <p>

      <h4>Quest√µes: </h4>
      <ul>
        <li><a href="arquivos_padrao/Quest√µes Ciberseguran√ßa - Parte 1.pdf" open target="_blank"> CIBERSEGURAN√áA - PARTE 1</a>
        </li>
        <br>
        <li><a href="arquivos_padrao/Quest√µes Ciberseguran√ßa - Parte 2.pdf" open target="_blank"> CIBERSEGURAN√áA - PARTE 2</a>
        </li>
        </ul>

      <h4>Quest√µes respondidas:</h4>
      <ul>
        <li><a href="arquivos_padrao/Quest√µes respondidas Ciberseguran√ßa - Parte 1.pdf" open target="_blank"> CIBERSEGURAN√áA
            RESPONDIDOS - PARTE 1</a></li>
        <br>
        <li><a href="arquivos_padrao/Quest√µes respondidas Ciberseguran√ßa - Parte 2.pdf" open target="_blank"> CIBERSEGURAN√áA
            RESPONDIDOS - PARTE 2</a></li>
      </ul>
      </p>
    </div>
    
    <div class="CR">
      <h3>Python</h3>
      <p>
        <h4>Quest√µes:</h4>
        <ul>
          <li><a href="arquivos_padrao/Quest√µes PY - Parte 1.pdf" open target="_blank"> PYTHON - PARTE 1</a></li>
          <br>
          <li><a href="arquivos_padrao/Quest√µes PY - Parte 2.pdf" open target="_blank"> PYTHON - PARTE 2</a></li>
        </ul>

        <h4>Quest√µes respondidas:</h4>
        <ul>
          <li><a href="arquivos_padrao/Quest√µes respondidas PY - Parte 1.pdf" open target="_blank"> PYTHON RESPONDIDOS -
            PARTE 1</a>
          </li>
          <br>
          <li><a href="arquivos_padrao/Quest√µes respondidas PY - Parte 2.pdf" open target="_blank"> PYTHON RESPONDIDOS -
            PARTE 2</a></li>
        </ul>
      </p>
    </div>
  </section>

  <section class="CR">
    <div class="CR">
      <h3>Banco de Dados:</h3>
      <p>

      <h4>Quest√µes: </h4>
      <ul>
        <li><a href="arquivos_padrao/Quest√µes Banco de Dados - Parte 1.pdf" open target="_blank"> BANCO DE DADOS - PARTE 1</a>
        </li>
        <br>
        <li><a href="arquivos_padrao/Quest√µes Banco de Dados - Parte 2.pdf" open target="_blank"> BANCO DE DADOS - PARTE 2</a>
        </li>
        </ul>

      <h4>Quest√µes respondidas:</h4>
      <ul>
        <li><a href="arquivos_padrao/Quest√µes respondidas Banco de Dados - Parte 1.pdf" open target="_blank"> BANCO DE DADOS
            RESPONDIDOS - PARTE 1</a></li>
        <br>
        <li><a href="arquivos_padrao/Quest√µes respondidas Banco de Dados - Parte 2.pdf" open target="_blank"> BANCO DE DADOS
            RESPONDIDOS - PARTE 2</a></li>
      </ul>
      </p>
    </div>
    
    <div class="CR">
      <h3>Redes de computadores</h3>
      <p>
        <h4>Quest√µes:</h4>
        <ul>
          <li><a href="arquivos_padrao/Quest√µes Redes de Computadores - Parte 1.pdf" open target="_blank"> REDES DE COMPUTADORES - PARTE 1</a></li>
          <br>
          <li><a href="arquivos_padrao/Quest√µes Redes de Computadores - Parte 2.pdf" open target="_blank"> REDES DE COMPUTADORES - PARTE 2</a></li>
        </ul>

        <h4>Quest√µes respondidas:</h4>
        <ul>
          <li><a href="arquivos_padrao/Quest√µes respondidas Redes de Computadores - Parte 1.pdf" open target="_blank"> REDES DE COMPUTADORES RESPONDIDOS -
            PARTE 1</a>
          </li>
          <br>
          <li><a href="arquivos_padrao/Quest√µes respondidas Redes de Computadores - Parte 2.pdf" open target="_blank"> REDES DE COMPUTADORES RESPONDIDOS -
            PARTE 2</a></li>
        </ul>
      </p>
    </div>
  </section>

  <br>
  <hr><br>

  <div class="CR">
    <h3 style="text-align: center;">Seus arquivos:</h3>
  </div>

  <section class="CR">
    <div class="CR">
      <ul id="listaArquivos"></ul> <!--onde aparecem os arquivos j√° upados-->
      <form style="text-align: left; padding: 2px; margin: 2px;">
    </div>

    <div>
      <h3>Fun√ß√µes:</h3>
      <br>
      <!-- upload de arquivos -->
      <input type="file" id="fileInput">
      <br><br>
      <button type="button" class="links" onclick="uploadArquivo()">Enviar Arquivo</button>
      <!--fun√ß√£o JS que manda pro back-->
      <br><br>
      <hr>
      <br>
      <button type="button" class="links LinksDelete" onclick="resetarArquivos()">Resetar Arquivos Padr√£o</button>
      <!--reseta tudo pros arquivos padr√£o-->
      </form>

    </div>
  </section>

  <footer>
    <p>&copy; 2025 Teacher Tech - Inform√°tica. Todos os direitos reservados.</p>
  </footer>

  <script>
    const userData = JSON.parse(localStorage.getItem("UserData")); // pega do localStorage os dados do user salvos como JSON
    const container = document.getElementById("userData"); // seleciona o lugar onde vai mostrar os dados

    // pega arquivo e cria FormData e depois manda pro back com fetch, se tiver sucesso, ele chama listarArquivos() pra atualizar a lista
    function uploadArquivo() {
      const file = document.getElementById("fileInput").files[0];
      if (!file) return alert("Selecione um arquivo primeiro!");

      const formData = new FormData();
      formData.append("arquivo", file);
      formData.append("NomeUsuario", userData.NomeUsuario);

      fetch("http://localhost:5000/upload", {
        method: "POST",
        body: formData
      })
        .then(res => res.json())
        .then(data => {
          alert(data.mensagem);
          listarArquivos();
        })
        .catch(err => alert("Erro no upload: " + err.message));
    }


    // puxa do flask os arquivos do user e cria <li> com link e bot√£o de lixeira
    function listarArquivos() {
      fetch(`http://localhost:5000/listar_arquivos/${userData.NomeUsuario}`)
        .then(res => res.json())
        .then(data => {
          const lista = document.getElementById("listaArquivos");
          lista.innerHTML = "";
          data.arquivos.forEach(arq => {
            const li = document.createElement("li");
            li.innerHTML = `
    <a href="http://localhost:5000/download/${arq}" target="_blank">${arq}</a>
    <button onclick="event.preventDefault(); deletarArquivo('${arq}')"
            style="margin-left: 10px;">üóëÔ∏è</button>
`;
            lista.appendChild(li);
          });
        });
    }


    // confirma antes, assim depois, manda pro endpoint /deletar_arquivo
    function deletarArquivo(nomeArquivo) {
      if (!confirm(`Deseja mesmo apagar o arquivo "${nomeArquivo}"?`)) return;

      fetch("http://localhost:5000/deletar_arquivo", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ filename: nomeArquivo })
      })
        .then(res => res.json())
        .then(data => {
          alert(data.mensagem);
          listarArquivos();
        })
        .catch(err => alert("Erro ao deletar: " + err.message));
    }
    window.onload = listarArquivos;


    // confirma antes, assim depois, manda pro /resetar_arquivos
    function resetarArquivos() {
      if (!confirm("Tem certeza que quer resetar seus arquivos? Isso vai apagar os atuais!")) return;

      fetch("http://localhost:5000/resetar_arquivos", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ NomeUsuario: userData.NomeUsuario })
      })
        .then(res => res.json())
        .then(data => {
          alert(data.mensagem);
          listarArquivos();
        })
        .catch(err => alert("Erro ao resetar arquivos: " + err.message));
    }
  </script>
</body>

</html>