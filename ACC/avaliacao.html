<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Teacher Tech - Criar Avalia√ß√£o</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="Imagens/LogoPrincipal.jpg" type="image">
</head>

<body>
  <header>
    <h2>Teacher Tech - Inform√°tica</h2>
    <nav>
      <a href="home.html">Inicio</a>
      <a href="banco.html">Banco de Quest√µes</a>
      <a href="avaliacao.html">Criar Avalia√ß√£o</a>
      <a href="sobre.html">Sobre</a>
      <a href="index.html">Entrar</a>
    </nav>
  </header>

  <section class="DM">
    <h1>Criar Avalia√ß√£o</h1>
    <p>Monte sua prova personalizada em minutos.</p>
    <h3>Comece Agora</h3>
    <h1>Gerador de PDF a partir de Texto</h1>
  </section>

  <section class="CR">
    <div class="CR">
      <h3>üìë Pr√©-visualiza√ß√£o</h3>
      <p>Veja como ficar√° sua avalia√ß√£o antes de imprimir.</p>
    </div>
  </section>

  <!--
rows - n√∫mero de linhas vis√≠veis
cols - especifica a largura em termos de colunas
placeholder - texto para exemplificar
-->
  <textarea id="meuTexto" rows="10" cols="30"
    placeholder="Escreva qualquer coisa usando o alfabeto latino...">
Disciplina:
Modelo:
Professor(a):
Ano / Segmento / Curso:
Per√≠odo letivo:
Data:
Aluno(a):
Nota:
</textarea>
  <br>

  <!--chama a fun√ß√£o gerarPDF() no JS com um bot√£o-->
  <section class="DM">
    <button onclick="gerarPDF()">Gerar PDF</button>
  </section>

  <script src="biblioteca/jsPDF.js"></script>
  <script>
    // cria a fun√ß√£o gerarPDF
    function gerarPDF() {
      const { jsPDF } = window.jspdf; // pega s√≥ a classe jsPDF do objeto global

      let texto = document.getElementById("meuTexto").value; // guarda numa vari√°vel, o que o usu√°rio digitou na √°rea de texto

      // caso o texto (vari√°vel) estiver vazio (ou s√≥ espa√ßos), envia um alert e cancela a fun√ß√£o
      if (!texto.trim()) { // trim() no JS remove espa√ßos em branco do in√≠cio e fim de uma string
        alert("Escreva algo antes de gerar um PDF");
        return;
      }

      const doc = new jsPDF(); //cria um novo pdf na mem√≥ria
      const margemEsq = 10; // margem esquerda em mil√≠metros
      const margemTopo = 10; // margem superior  em mil√≠metros
      const alturaLinha = 8; // espa√ßamento entre linhas
      const alturaPagina = doc.internal.pageSize.height; // obt√©m altura da p√°gina atual em mm
      const larguraPagina = doc.internal.pageSize.width; // obt√©m largura da p√°gina atual em mm

      // m√©todo para quebrar o texto em v√°rias linhas para cabir na p√°gina
      const linhas = doc.splitTextToSize(texto, larguraPagina - margemEsq * 2); // descontando as margens

      let y = margemTopo; // posi√ß√£o vertical (y) onde o texto come√ßa

      linhas.forEach(linha => { // loop para ir em cada linha e j√° quebrado para inserir no pdf
        if (y + alturaLinha > alturaPagina - margemTopo) { // vendo se a pr√≥xima linha vai ultrapassar o limite da p√°gina (alturaPagina - margemTopo)
          doc.addPage(); // cria uma nova p√°gina pdf
          y = margemTopo;
        } // Volta y para o topo da nova p√°gina

        doc.text(linha, margemEsq, y); // escreve a linha no pdf na posi√ß√£o
        y += alturaLinha;
      }); // descer a escrita para a pr√≥xima linha

      doc.save("arquivo.pdf"); // gera um arquivo / manda baixar com o nome "arquivo.pdf"
    }
  </script>

  <footer>
    <p>&copy; 2025 Teacher Tech - Inform√°tica. Todos os direitos reservados.</p>
  </footer>
</body>

</html>